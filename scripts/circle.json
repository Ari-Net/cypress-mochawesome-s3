{
  "version": 2,
  "defaults": {
    "working_directory": "~/app",
    "docker": [
      {
        "image": "cypress/base:8",
        "environment": {
          "TERM": "xterm"
        }
      }
    ]
  },
  "jobs": {
    "build": {
      "working_directory": "~/app",
      "docker": [
        {
          "image": "cypress/base:8",
          "environment": {
            "TERM": "xterm"
          }
        }
      ],
      "steps": [
        "checkout",
        {
          "run": "pwd"
        },
        {
          "run": "ls"
        },
        {
          "restore_cache": {
            "keys": [
              "v2-deps-{{ .Branch }}-{{ checksum \"package-lock.json\" }}",
              "v2-deps-{{ .Branch }}-",
              "v2-deps-"
            ]
          }
        },
        {
          "run": "npm install"
        },
        {
          "save_cache": {
            "key": "v2-deps-{{ .Branch }}-{{ checksum \"package-lock.json\" }}",
            "paths": [
              "~/.npm",
              "~/.cache"
            ]
          }
        },
        {
          "persist_to_workspace": {
            "root": "~/",
            "paths": [
              ".cache",
              "app"
            ]
          }
        }
      ]
    }
  },
  "workflows": {
    "version": 2,
    "build_and_test": {
      "jobs": [
        "build"
      ]
    }
  }
}
